\hypertarget{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry}{}\section{R\+J\+C\+P.\+Datastructures.\+Timer\+Expiry Class Reference}
\label{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry}\index{RJCP.Datastructures.TimerExpiry@{RJCP.Datastructures.TimerExpiry}}


A class to maintain how much time is remaining since the last reset, until expiry.  


\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry_a6474d821e4ace9b45cf91c074fdd2956}{Timer\+Expiry}} (int milliseconds)
\begin{DoxyCompactList}\small\item\em Constructor. Initialise expiry based on the current time. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry_aae9e5e2c9c3f6d30001e4fb04abf2244}{Remaining\+Time}} ()
\begin{DoxyCompactList}\small\item\em Estimate the amount of time (ms) remaining from when this function is called until expiry. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry_ad2241fbbdbbe1423b50f4b4b54ccbed1}{Reset}} ()
\begin{DoxyCompactList}\small\item\em Reset the time out so it occurs with the given \mbox{\hyperlink{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry_ad6a62756590878b3053a15a5c112d944}{Timeout}}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Properties}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry_ad6a62756590878b3053a15a5c112d944}{Timeout}}\hspace{0.3cm}{\ttfamily  \mbox{[}get, set\mbox{]}}
\begin{DoxyCompactList}\small\item\em The time for expiry on the next reset. System.\+Threading.\+Timeout.\+Infinite indicates no expiry. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry_ab764bd1af3d3270ee128f649949bdb19}{Expired}}\hspace{0.3cm}{\ttfamily  \mbox{[}get\mbox{]}}
\begin{DoxyCompactList}\small\item\em Test if the timer expiry has expired. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
A class to maintain how much time is remaining since the last reset, until expiry. 

This class is useful when implementing time outs in other methods. It can provide the remaining time, in units of milliseconds, that can be used with many Operating \mbox{\hyperlink{namespace_system}{System}} calls as an expiry time. 

One example is the M\+:\+System.\+Threading.\+Wait\+Handle.\+Wait\+One method which expects a time out parameter. Either instantiate the \mbox{\hyperlink{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry}{Timer\+Expiry}} class at the beginning immediately before its use, or call the \mbox{\hyperlink{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry_ad2241fbbdbbe1423b50f4b4b54ccbed1}{Reset}} method at the beginning of the time out operation. Then on return of the function, if no other operation occurred, the method \mbox{\hyperlink{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry_aae9e5e2c9c3f6d30001e4fb04abf2244}{Remaining\+Time}} should return 0 indicating that the timer has expired.

Another thread can be programmed to \mbox{\hyperlink{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry_ad2241fbbdbbe1423b50f4b4b54ccbed1}{Reset}} the timer class during a time out operation, so that even if the result of Wait operation by the Operating system resulted in a time out, a \mbox{\hyperlink{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry_ad2241fbbdbbe1423b50f4b4b54ccbed1}{Reset}}, which results in the \mbox{\hyperlink{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry_aae9e5e2c9c3f6d30001e4fb04abf2244}{Remaining\+Time}} being more than 0 milliseconds, indicates that another wait operation should occur.

Even if no expiry is to occur, but the Operating \mbox{\hyperlink{namespace_system}{System}} function returns early, you can opt to restart the time out operation which will then take into account the current time and reduce the time out so that the operation ends as expected.

As an example, say you need to wait for data by calling a method which waits for the first set of data within a time out. But your method must wait for at least two elements of data within the time out. This can be implemented as follows\+:

public true My\+Func(int time\+Out) \{ \mbox{\hyperlink{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry}{Timer\+Expiry}} my\+Expiry = new Timer\+Expiry(time\+Out); int elements = 0; do \{ elements += Get\+Data(my\+Expiry.\+Remaining\+Time()); \} while (elements $<$ 2 \&\& !my\+Expiry.Expired);

if (elements $>$=2) return true; return false; \} 

\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry_a6474d821e4ace9b45cf91c074fdd2956}\label{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry_a6474d821e4ace9b45cf91c074fdd2956}} 
\index{RJCP.Datastructures.TimerExpiry@{RJCP.Datastructures.TimerExpiry}!TimerExpiry@{TimerExpiry}}
\index{TimerExpiry@{TimerExpiry}!RJCP.Datastructures.TimerExpiry@{RJCP.Datastructures.TimerExpiry}}
\subsubsection{\texorpdfstring{TimerExpiry()}{TimerExpiry()}}
{\footnotesize\ttfamily R\+J\+C\+P.\+Datastructures.\+Timer\+Expiry.\+Timer\+Expiry (\begin{DoxyParamCaption}\item[{int}]{milliseconds }\end{DoxyParamCaption})}



Constructor. Initialise expiry based on the current time. 


\begin{DoxyParams}{Parameters}
{\em milliseconds} & The initial time out in milliseconds.\\
\hline
\end{DoxyParams}


The constructor sets the initial time out that should be used. On construction of the new object, the timer is automatically started. 

\subsection{Member Function Documentation}
\mbox{\Hypertarget{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry_aae9e5e2c9c3f6d30001e4fb04abf2244}\label{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry_aae9e5e2c9c3f6d30001e4fb04abf2244}} 
\index{RJCP.Datastructures.TimerExpiry@{RJCP.Datastructures.TimerExpiry}!RemainingTime@{RemainingTime}}
\index{RemainingTime@{RemainingTime}!RJCP.Datastructures.TimerExpiry@{RJCP.Datastructures.TimerExpiry}}
\subsubsection{\texorpdfstring{RemainingTime()}{RemainingTime()}}
{\footnotesize\ttfamily int R\+J\+C\+P.\+Datastructures.\+Timer\+Expiry.\+Remaining\+Time (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Estimate the amount of time (ms) remaining from when this function is called until expiry. 

\begin{DoxyReturn}{Returns}
The time to expiry in milliseconds.
\end{DoxyReturn}
\mbox{\Hypertarget{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry_ad2241fbbdbbe1423b50f4b4b54ccbed1}\label{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry_ad2241fbbdbbe1423b50f4b4b54ccbed1}} 
\index{RJCP.Datastructures.TimerExpiry@{RJCP.Datastructures.TimerExpiry}!Reset@{Reset}}
\index{Reset@{Reset}!RJCP.Datastructures.TimerExpiry@{RJCP.Datastructures.TimerExpiry}}
\subsubsection{\texorpdfstring{Reset()}{Reset()}}
{\footnotesize\ttfamily void R\+J\+C\+P.\+Datastructures.\+Timer\+Expiry.\+Reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Reset the time out so it occurs with the given \mbox{\hyperlink{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry_ad6a62756590878b3053a15a5c112d944}{Timeout}}. 



\subsection{Property Documentation}
\mbox{\Hypertarget{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry_ab764bd1af3d3270ee128f649949bdb19}\label{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry_ab764bd1af3d3270ee128f649949bdb19}} 
\index{RJCP.Datastructures.TimerExpiry@{RJCP.Datastructures.TimerExpiry}!Expired@{Expired}}
\index{Expired@{Expired}!RJCP.Datastructures.TimerExpiry@{RJCP.Datastructures.TimerExpiry}}
\subsubsection{\texorpdfstring{Expired}{Expired}}
{\footnotesize\ttfamily bool R\+J\+C\+P.\+Datastructures.\+Timer\+Expiry.\+Expired\hspace{0.3cm}{\ttfamily [get]}}



Test if the timer expiry has expired. 

\mbox{\Hypertarget{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry_ad6a62756590878b3053a15a5c112d944}\label{class_r_j_c_p_1_1_datastructures_1_1_timer_expiry_ad6a62756590878b3053a15a5c112d944}} 
\index{RJCP.Datastructures.TimerExpiry@{RJCP.Datastructures.TimerExpiry}!Timeout@{Timeout}}
\index{Timeout@{Timeout}!RJCP.Datastructures.TimerExpiry@{RJCP.Datastructures.TimerExpiry}}
\subsubsection{\texorpdfstring{Timeout}{Timeout}}
{\footnotesize\ttfamily int R\+J\+C\+P.\+Datastructures.\+Timer\+Expiry.\+Timeout\hspace{0.3cm}{\ttfamily [get]}, {\ttfamily [set]}}



The time for expiry on the next reset. System.\+Threading.\+Timeout.\+Infinite indicates no expiry. 



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
C\+:/\+P\+R\+O\+J\+E\+C\+T\+S/\+C\#/\+B\+S\+L430.\+N\+E\+T/src/\+B\+S\+L430.\+N\+E\+T/\+Library/serialportstream/2.\+1.\+4/src/\+Datastructures/Timer\+Expiry.\+cs\end{DoxyCompactItemize}
